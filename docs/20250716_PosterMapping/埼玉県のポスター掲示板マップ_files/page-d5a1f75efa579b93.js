try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="2da709f2-845c-47e9-b7ae-482f14281d3f",e._sentryDebugIdIdentifier="sentry-dbid-2da709f2-845c-47e9-b7ae-482f14281d3f")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[479],{33045:(e,s,t)=>{"use strict";t.d(s,{b:()=>a});let a={not_yet:{label:"未貼付",color:"bg-gray-500"},reserved:{label:"予約",color:"bg-yellow-500"},done:{label:"完了",color:"bg-green-500"},error_wrong_place:{label:"エラー（ポスター掲示板マップと実際の場所・番号が違う）",shortLabel:"場所違い",color:"bg-red-500"},error_damaged:{label:"エラー（損傷・破損）",shortLabel:"破損",color:"bg-red-500"},error_wrong_poster:{label:"エラー（他党のポスターが貼られている）",shortLabel:"他党",color:"bg-red-500"},other:{label:"その他（詳細をメモに記載）",shortLabel:"その他",color:"bg-purple-500"}}},62603:(e,s,t)=>{Promise.resolve().then(t.bind(t,98686))},67133:(e,s,t)=>{"use strict";t.r(s),t.d(s,{DropdownMenu:()=>c,DropdownMenuCheckboxItem:()=>w,DropdownMenuContent:()=>j,DropdownMenuGroup:()=>u,DropdownMenuItem:()=>g,DropdownMenuLabel:()=>v,DropdownMenuPortal:()=>x,DropdownMenuRadioGroup:()=>h,DropdownMenuRadioItem:()=>N,DropdownMenuSeparator:()=>y,DropdownMenuShortcut:()=>_,DropdownMenuSub:()=>p,DropdownMenuSubContent:()=>b,DropdownMenuSubTrigger:()=>f,DropdownMenuTrigger:()=>m});var a=t(95155),r=t(48698),n=t(13052),l=t(5196),d=t(9428),o=t(12115),i=t(73613);let c=r.bL,m=r.l9,u=r.YJ,x=r.ZL,p=r.Pb,h=r.z6,f=o.forwardRef((e,s)=>{let{className:t,inset:l,children:d,...o}=e;return(0,a.jsxs)(r.ZP,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",t),...o,children:[d,(0,a.jsx)(n.A,{className:"ml-auto h-4 w-4"})]})});f.displayName=r.ZP.displayName;let b=o.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.G5,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})});b.displayName=r.G5.displayName;let j=o.forwardRef((e,s)=>{let{className:t,sideOffset:n=4,...l}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:s,sideOffset:n,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});j.displayName=r.UC.displayName;let g=o.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(r.q7,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-2.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",t),...l})});g.displayName=r.q7.displayName;let w=o.forwardRef((e,s)=>{let{className:t,children:n,checked:d,...o}=e;return(0,a.jsxs)(r.H_,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:d,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),n]})});w.displayName=r.H_.displayName;let N=o.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(r.hN,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),n]})});N.displayName=r.hN.displayName;let v=o.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...l})});v.displayName=r.JU.displayName;let y=o.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});y.displayName=r.wv.displayName;let _=e=>{let{className:s,...t}=e;return(0,a.jsx)("span",{className:(0,i.cn)("ml-auto text-xs tracking-widest opacity-60",s),...t})};_.displayName="DropdownMenuShortcut"},72179:(e,s,t)=>{"use strict";function a(e,s){return 0===s?0:Math.floor(e/s*100)}function r(e){return e.done||0}function n(e){return Object.values(e).reduce((e,s)=>e+s,0)}t.d(s,{Wr:()=>a,bk:()=>r,iX:()=>n})},98686:(e,s,t)=>{"use strict";t.d(s,{default:()=>E});var a=t(95155),r=t(77503),n=t(97168),l=t(99840),d=t(67133),o=t(82714),i=t(95784),c=t(99474),m=t(5612),u=t(46414);async function x(e){let s=(0,u.U)(),t=[],a=!0,r=0;for(;a;){let n=s.from("poster_boards").select("id,lat,long,status,name,address,city,number").range(r,r+5e3-1).order("id",{ascending:!0});e&&(n=n.eq("prefecture",e));let{data:l,error:d}=await n;if(d)throw console.error("Error fetching poster boards:",d),d;l&&0!==l.length?(t.push(...l),l.length<5e3?a=!1:r+=5e3):a=!1}return t}async function p(e){let s=(0,u.U)(),{data:t,error:a}=await s.from("poster_boards").select("*").eq("id",e).single();return a?(console.error("Error fetching poster board detail:",a),null):t}async function h(e,s,t){let a=(0,u.U)(),{data:r,error:n}=await a.from("poster_boards").select("status").eq("id",e).single();if(n)throw console.error("Error fetching current board status:",n),n;let{error:l}=await a.from("poster_boards").update({status:s}).eq("id",e);if(l)throw console.error("Error updating board status:",l),l;let{data:{user:d}}=await a.auth.getUser();if(!d)throw Error("User must be authenticated to update board status");let{error:o}=await a.from("poster_board_status_history").insert({board_id:e,user_id:d.id,previous_status:r.status,new_status:s,note:t||null});if(o)throw console.error("Error inserting status history:",o),o;return{success:!0}}var f=t(72179),b=t(35169),j=t(94788),g=t(24357),w=t(4516),N=t(29676),v=t(55028),y=t(6874),_=t.n(y),S=t(35695),D=t(12115),C=t(56671),R=t(33045),k=t(34477);let I=(0,k.createServerReference)("408c4c37cbd39503a25ffc23bef152e3457b60024e",k.callServer,void 0,k.findSourceMapURL,"getPosterBoardStatsAction"),M=(0,k.createServerReference)("602e841b02c4d7a0990f12cf84ca388969806e708c",k.callServer,void 0,k.findSourceMapURL,"getUserEditedBoardIdsAction"),U=(0,k.createServerReference)("40a43a13ed2687242b096e58bbdec8d246dd283334",k.callServer,void 0,k.findSourceMapURL,"getBoardStatusHistoryAction"),L=(0,v.default)(()=>Promise.all([t.e(1592),t.e(1761),t.e(9900),t.e(2281)]).then(t.bind(t,72281)),{loadableGenerated:{webpack:()=>[72281]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex h-[600px] items-center justify-center",children:"地図を読み込み中..."})});function E(e){let{userId:s,prefecture:t,prefectureName:v,center:y,initialStats:k,boardTotal:E,userEditedBoardIds:q}=e,A=(0,S.useRouter)(),[P,z]=(0,D.useState)([]),[O,B]=(0,D.useState)(!0),[$,G]=(0,D.useState)(null),[T,F]=(0,D.useState)(!1),[J,Z]=(0,D.useState)("not_yet"),[H,V]=(0,D.useState)(""),[W,X]=(0,D.useState)(!1),[K,Q]=(0,D.useState)(!1),[Y,ee]=(0,D.useState)(null),[es,et]=(0,D.useState)([]),[ea,er]=(0,D.useState)(!1),[en,el]=(0,D.useState)(!1),[ed,eo]=(0,D.useState)(!1),[ei,ec]=(0,D.useState)(k),[em,eu]=(0,D.useState)({selectedStatuses:["not_yet","reserved","done","error_wrong_place","error_damaged","error_wrong_poster","other"],showOnlyMine:!1}),[ex,ep]=(0,D.useState)(()=>new Set(q||[])),[eh,ef]=(0,D.useState)(null);(0,D.useEffect)(()=>{(async()=>{try{var e;let s=(0,u.U)(),{data:t}=await s.from("missions").select("id").eq("slug","put-up-poster-on-board").single();ef(null!=(e=null==t?void 0:t.id)?e:null)}catch(e){console.error("ミッションIDの取得に失敗しました:",e),ef(null)}})()},[]),(0,D.useEffect)(()=>{ej()},[]),(0,D.useEffect)(()=>{if(s&&P.length>0){let e=localStorage.getItem("selectedBoardId"),s=localStorage.getItem("selectedBoardPrefecture");if(e&&s===t){let s=P.find(s=>s.id===e);s&&(G(s),Z(s.status),V(""),et([]),er(!1),F(!0),localStorage.removeItem("selectedBoardId"),localStorage.removeItem("selectedBoardPrefecture"))}}},[s,P,t]);let eb=async e=>{try{await navigator.clipboard.writeText(e),C.oR.success("住所をコピーしました")}catch(e){C.oR.error("コピーに失敗しました")}},ej=async()=>{try{let e=await x(t);z(e);let a=await I(t);if(ec(a),s){let e=await M(t,s);ep(new Set(e||[]))}}catch(e){C.oR.error("ポスター掲示板の読み込みに失敗しました")}finally{B(!1)}},eg=async e=>{if(!s){localStorage.setItem("selectedBoardId",e.id),localStorage.setItem("selectedBoardPrefecture",t),ee(e),Q(!0);return}let a=await p(e.id);if(!a)return void C.oR.error("掲示板の詳細情報の取得に失敗しました");G(a),Z(a.status),V(""),et([]),er(!1),F(!0)},ew=async()=>{if($&&s){el(!0);try{let e=await U($.id);et(e)}catch(e){C.oR.error("履歴の読み込みに失敗しました")}finally{el(!1)}}},eN=async(e,s)=>{let t=(0,u.U)(),{data:a}=await t.from("missions").select("id").eq("slug","put-up-poster-on-board").single();if(!a)return!1;let{data:r}=await t.from("poster_activities").select("\n        id,\n        mission_artifacts!inner(\n          achievements!inner(\n            mission_id,\n            user_id\n          )\n        )\n      ").eq("board_id",e).eq("mission_artifacts.achievements.user_id",s).eq("mission_artifacts.achievements.mission_id",a.id);return!!(r&&r.length>0)},ev=async e=>{var s,t;let a=(0,u.U)(),{data:n}=await a.from("missions").select("id").eq("slug","put-up-poster-on-board").single();if(!n)return;let l=new FormData;l.append("missionId",n.id),l.append("requiredArtifactType","POSTER"),l.append("posterCount","1"),l.append("prefecture",e.prefecture),l.append("city",e.city),l.append("boardNumber",e.number||""),l.append("boardName",e.name||""),l.append("boardNote",H||""),l.append("boardAddress",e.address||""),l.append("boardLat",(null==(s=e.lat)?void 0:s.toString())||""),l.append("boardLong",(null==(t=e.long)?void 0:t.toString())||""),l.append("boardId",e.id);let d=await (0,r.Q)(l);d.success&&C.oR.success("ミッション達成！ +".concat(d.xpGranted,"XP獲得"))},ey=async()=>{if($){X(!0);try{if(await h($.id,J,H),"done"===J){let e=(0,u.U)(),{data:{user:s}}=await e.auth.getUser();s&&(await eN($.id,s.id)||ev($).catch(()=>{}))}C.oR.success("ステータスを更新しました"),F(!1),await ej(),et([]),er(!1)}catch(e){C.oR.error("ステータスの更新に失敗しました")}finally{X(!1)}}};if(O)return(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"mb-4 text-lg",children:"読み込み中..."})})});let e_=(null==ei?void 0:ei.statusCounts)||{not_yet:0,reserved:0,done:0,error_wrong_place:0,error_damaged:0,error_wrong_poster:0,other:0},eS=(null==ei?void 0:ei.totalCount)||0,eD=(null==E?void 0:E.total_count)||0,eC=eD>0?eD:eS,eR=(0,f.bk)(e_),ek=(0,f.Wr)(eR,eS);return(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl space-y-3 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_(),{href:"/map/poster",children:(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsxs)("h1",{className:"text-lg font-bold",children:[v,"のポスター掲示板"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground hidden sm:block",children:s?"掲示板をクリックしてステータスを更新":"ログインするとステータスを更新できます"}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>eo(!0),title:"使い方を見る",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border bg-card",children:(0,a.jsx)(L,{boards:P,onBoardClick:eg,center:y,prefectureKey:m.PL[v],onFilterChange:eu,currentUserId:s,userEditedBoardIds:ex})}),(0,a.jsx)("div",{className:"rounded-lg border bg-card p-3",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-4",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-2xl font-bold",children:eC}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"総数"}),eD>0&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(登録: ",eS,")"]})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-green-600",children:eR}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"完了"})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[ek,"%"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"達成率"})]})]}),(0,a.jsx)("div",{className:"hidden sm:block h-6 w-px bg-border"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-x-3 gap-y-1",children:Object.entries(R.b).map(e=>{let[s,t]=e,r=e_[s]||0;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"h-2.5 w-2.5 rounded-full flex-shrink-0 ".concat(t.color)}),(0,a.jsxs)("span",{className:"text-xs whitespace-nowrap",children:[t.shortLabel||t.label,(0,a.jsx)("span",{className:"ml-0.5 font-semibold",children:r})]})]},s)})})]})}),(0,a.jsxs)("div",{className:"max-w-xl mx-auto mt-4 mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded text-gray-800 text-sm",children:[(0,a.jsx)("p",{children:"「ポスターマップ上に掲示板が見当たらない」「ポスターを貼ったがポイントに反映されなかった」などの問題がある場合は、下記のミッションにて報告をお願いいたします\uD83D\uDC47"}),(0,a.jsx)("p",{className:"mt-2",children:eh?(0,a.jsx)("a",{href:"/missions/".concat(eh),className:"text-blue-700 underline font-bold",children:"\uD83D\uDD17 ミッション「選挙区ポスターを貼ろう」"}):(0,a.jsx)("span",{className:"text-gray-400 font-bold cursor-not-allowed",title:"ミッションページが見つかりません",children:"\uD83D\uDD17 ミッションページが見つかりません。ご意見箱からご報告いただけると幸いです\uD83D\uDE47"})}),(0,a.jsx)("p",{className:"mt-2",children:"ご協力ありがとうございます！"})]}),(0,a.jsx)(l.lG,{open:T,onOpenChange:F,children:(0,a.jsxs)(l.Cf,{children:[(0,a.jsxs)(l.c7,{children:[(0,a.jsx)(l.L3,{children:"ポスターの状況を報告"}),(0,a.jsxs)(l.rr,{children:[(null==$?void 0:$.name)||(null==$?void 0:$.address)||(null==$?void 0:$.number),"の状況を教えてください"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:(null==$?void 0:$.name)||(null==$?void 0:$.address)||(null==$?void 0:$.number)}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{let e=(null==$?void 0:$.name)||(null==$?void 0:$.address)||(null==$?void 0:$.number);e&&eb(e)},title:"名前/住所をコピー",children:(0,a.jsx)(g.A,{className:"h-3 w-3"})})]}),$&&(0,a.jsx)("div",{className:"mb-4 text-sm text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{children:[$.city," ",$.address," (",$.number,")"]}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{eb("".concat($.city," ").concat($.address))},title:"住所をコピー",children:(0,a.jsx)(g.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)(d.DropdownMenu,{children:[(0,a.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-1"}),"地図で開く"]})}),(0,a.jsxs)(d.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,a.jsx)("a",{href:$.lat&&$.long?"https://www.google.com/maps?q=".concat($.lat,",").concat($.long):"https://www.google.com/maps/search/".concat(encodeURIComponent("".concat($.city).concat($.address))),target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full",children:"Google Maps"})}),(0,a.jsx)(d.DropdownMenuItem,{asChild:!0,children:(0,a.jsx)("a",{href:$.lat&&$.long?"maps://maps.apple.com/?q=".concat($.lat,",").concat($.long):"maps://maps.apple.com/?q=".concat(encodeURIComponent("".concat($.city).concat($.address))),target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full",children:"Apple Maps"})})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.Label,{htmlFor:"status",children:"ポスターの状況"}),(0,a.jsxs)(i.l6,{value:J,onValueChange:e=>Z(e),children:[(0,a.jsx)(i.bq,{id:"status",children:(0,a.jsx)(i.yv,{})}),(0,a.jsx)(i.gC,{children:Object.entries(R.b).map(e=>{let[s,t]=e;return(0,a.jsx)(i.eb,{value:s,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 rounded-full flex-shrink-0 ".concat(t.color)}),(0,a.jsx)("span",{children:t.label})]})},s)})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.Label,{htmlFor:"note",children:"連絡事項など"}),(0,a.jsx)(c.T,{id:"note",value:H,onChange:e=>V(e.target.value),placeholder:"「ポスターが破れていた」「他のポスターで隠れていた」など、気づいたことを教えてください。",rows:3})]})]}),ea&&(0,a.jsxs)("div",{className:"border-t pt-4 mt-4 max-h-48 overflow-y-auto",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"更新履歴"}),en?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"読み込み中..."}):0===es.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"履歴がありません"}):(0,a.jsx)("div",{className:"space-y-2",children:es.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"text-muted-foreground",children:[(null==(s=R.b[e.previous_status])?void 0:s.label)||e.previous_status,"→",(null==(t=R.b[e.new_status])?void 0:t.label)||e.new_status]}),(0,a.jsxs)("div",{className:"text-muted-foreground text-xs",children:[new Date(e.created_at).toLocaleString("ja-JP"),e.note&&(0,a.jsxs)("span",{className:"ml-2",children:["「",e.note,"」"]})]})]},e.id)})})]}),(0,a.jsxs)(l.Es,{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>{ea||ew(),er(!ea)},type:"button",children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"これまでの報告"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>F(!1),disabled:W,children:"キャンセル"}),(0,a.jsx)(n.$,{onClick:ey,disabled:W,children:W?"報告中...":"報告する"})]})]})]})}),(0,a.jsx)(l.lG,{open:K,onOpenChange:Q,children:(0,a.jsxs)(l.Cf,{children:[(0,a.jsxs)(l.c7,{children:[(0,a.jsx)(l.L3,{children:"ログインが必要です"}),(0,a.jsx)(l.rr,{children:"ポスターの状況を更新するには、ログインが必要です。"})]}),(0,a.jsx)("div",{className:"py-4",children:Y&&(0,a.jsxs)("div",{className:"mt-3 rounded-md bg-muted p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:Y.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:Y.address})]})}),(0,a.jsxs)(l.Es,{className:"gap-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>Q(!1),children:"キャンセル"}),(0,a.jsx)(n.$,{onClick:()=>{let e=m.PL[v];A.push("/sign-in?returnUrl=".concat(encodeURIComponent("/map/poster/".concat(e))))},children:"ログインページへ"})]})]})}),(0,a.jsx)(l.lG,{open:ed,onOpenChange:eo,children:(0,a.jsxs)(l.Cf,{children:[(0,a.jsx)(l.c7,{children:(0,a.jsx)(l.L3,{children:"使い方"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"地図の操作"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"地図をドラッグして移動できます"}),(0,a.jsx)("li",{children:"ピンチ操作またはボタンでズームできます"}),(0,a.jsx)("li",{children:"現在地ボタンで自分の位置を表示できます"})]})]}),s?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"ポスターの状況報告"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"地図上の掲示板マーカーをタップします"}),(0,a.jsx)("li",{children:"ポスターの状況を選択します"}),(0,a.jsx)("li",{children:"必要に応じて連絡事項を入力します"}),(0,a.jsx)("li",{children:"「報告する」ボタンで更新完了です"})]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"ポスターの状況を報告するには"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ログインすると、掲示板をタップしてポスターの状況を報告できるようになります。"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"マーカーの色の意味"}),(0,a.jsx)("div",{className:"space-y-2 text-sm",children:Object.entries(R.b).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full flex-shrink-0 mt-0.5 ".concat(t.color)}),(0,a.jsx)("span",{className:"text-xs",children:t.label})]},s)})})]})]}),(0,a.jsx)(l.Es,{children:(0,a.jsx)(n.$,{onClick:()=>eo(!1),children:"閉じる"})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[6422,6874,5904,5900,3865,6671,9720,1118,2291,5832,8441,3541,7358],()=>s(62603)),_N_E=e.O()}]);